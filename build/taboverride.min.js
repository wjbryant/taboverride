/*! taboverride v3.2.0 | https://github.com/wjbryant/taboverride
Copyright (c) 2012 Bill Bryant | http://opensource.org/licenses/mit */
(function(e){"use strict";function t(){var t=window.TABOVERRIDE=e();return t}typeof define=="function"&&define.amd?define("taboverride",[],t):t()})(function(){"use strict";function d(e,t){var n=["alt","ctrl","meta","shift"],r=e.length,i,s,o,u=!0;for(i=0;i<r;i+=1)if(!t[e[i]]){u=!1;break}if(u)for(i=0;i<n.length;i+=1){o=n[i]+"Key";if(t[o])if(r){u=!1;for(s=0;s<r;s+=1)if(o===e[s]){u=!0;break}}else u=!1;if(!u)break}return u}function v(e,t){return e===s&&d(u,t)}function m(e,t){return e===o&&d(a,t)}function g(e,t){return function(n,r){var i,s="";if(arguments.length){e(n),t.length=0;if(r&&r.length)for(i=0;i<r.length;i+=1)t.push(r[i]+"Key");return this}for(i=0;i<t.length;i+=1)s+=t[i].slice(0,-3)+"+";return s+e()}}function y(e){e=e||event;var n=e.currentTarget||e.srcElement,r=e.keyCode,u,a,c,d,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M="character";if(n.nodeName&&n.nodeName.toLowerCase()!=="textarea"||r!==s&&r!==o&&(r!==13||!f))return;l=!1,c=n.value,w=n.scrollTop;if(typeof n.selectionStart=="number")E=n.selectionStart,S=n.selectionEnd,x=c.slice(E,S);else{if(!t.selection)return;d=t.selection.createRange(),x=d.text,g=d.duplicate(),g.moveToElementText(n),g.setEndPoint("EndToEnd",d),S=g.text.length,E=S-x.length,p>1?(y=c.slice(0,E).split(h).length-1,b=x.split(h).length-1):y=b=0}if(r===s||r===o){u=i,a=u.length,C=0,k=0,L=0;if(E!==S&&x.indexOf("\n")!==-1){E===0||c.charAt(E-1)==="\n"?T=E:T=c.lastIndexOf("\n",E-1)+1,S===c.length||c.charAt(S)==="\n"?N=S:(N=c.indexOf("\n",S),N===-1&&(N=c.length));if(v(r,e))C=1,n.value=c.slice(0,T)+u+c.slice(T,E)+x.replace(/\n/g,function(){return C+=1,"\n"+u})+c.slice(S),d?(d.collapse(),d.moveEnd(M,S+C*a-b-y),d.moveStart(M,E+a-y),d.select()):(n.selectionStart=E+a,n.selectionEnd=S+C*a,n.scrollTop=w);else{if(!m(r,e))return;c.slice(T).indexOf(u)===0&&(T===E?x=x.slice(a):L=a,k=a),n.value=c.slice(0,T)+c.slice(T+L,E)+x.replace(new RegExp("\n"+u,"g"),function(){return C+=1,"\n"})+c.slice(S),d?(d.collapse(),d.moveEnd(M,S-k-C*a-b-y),d.moveStart(M,E-L-y),d.select()):(n.selectionStart=E-L,n.selectionEnd=S-k-C*a)}}else if(v(r,e))d?(d.text=u,d.select()):(n.value=c.slice(0,E)+u+c.slice(S),n.selectionEnd=n.selectionStart=E+a,n.scrollTop=w);else{if(!m(r,e))return;c.slice(E-a).indexOf(u)===0&&(n.value=c.slice(0,E-a)+c.slice(E),d?(d.move(M,E-a-y),d.select()):(n.selectionEnd=n.selectionStart=E-a,n.scrollTop=w))}}else if(f){if(E===0||c.charAt(E-1)==="\n"){l=!0;return}T=c.lastIndexOf("\n",E-1)+1,N=c.indexOf("\n",E),N===-1&&(N=c.length),A=c.slice(T,N).match(/^[ \t]*/)[0],O=A.length;if(E<T+O){l=!0;return}d?(d.text="\n"+A,d.select()):(n.value=c.slice(0,E)+"\n"+A+c.slice(S),n.selectionEnd=n.selectionStart=E+p+O,n.scrollTop=w)}if(!e.preventDefault)return e.returnValue=!1,!1;e.preventDefault()}function b(e){e=e||event;var t=e.keyCode;if(v(t,e)||m(t,e)||t===13&&f&&!l){if(!e.preventDefault)return e.returnValue=!1,!1;e.preventDefault()}}var e={},t=window.document,n,r,i="	",s=9,o=9,u=[],a=["shiftKey"],f=!1,l=!1,c=t.createElement("textarea"),h,p;return t.addEventListener?(n=function(e){r(e),e.addEventListener("keydown",y,!1),e.addEventListener("keypress",b,!1)},r=function(e){e.removeEventListener("keydown",y,!1),e.removeEventListener("keypress",b,!1)}):t.attachEvent?(n=function(e){r(e),e.attachEvent("onkeydown",y),e.attachEvent("onkeypress",b)},r=function(e){e.detachEvent("onkeydown",y),e.detachEvent("onkeypress",b)}):n=r=function(){},e.overrideKeyDown=y,e.overrideKeyPress=b,e.set=function(e,t){var i,s,o,u,a;if(e){i=arguments.length<2||t?n:r,u=e,o=u.length,typeof o!="number"&&(u=[u],o=1);for(s=0;s<o;s+=1)a=u[s],a&&a.nodeName&&a.nodeName.toLowerCase()==="textarea"&&i(a)}return this},e.tabSize=function(e){var t;if(arguments.length){if(!e)i="	";else if(typeof e=="number"&&e>0){i="";for(t=0;t<e;t+=1)i+=" "}return this}return i==="	"?0:i.length},e.autoIndent=function(e){return arguments.length?(f=e?!0:!1,this):f},e.tabKey=g(function(e){if(!arguments.length)return s;s=e},u),e.untabKey=g(function(e){if(!arguments.length)return o;o=e},a),c.value="\n",h=c.value,p=h.length,c=null,e});
